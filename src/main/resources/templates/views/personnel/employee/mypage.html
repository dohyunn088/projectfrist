<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" th:replace="~{views/common/layout :: layout(~{::head} ,~{::main} ) }">
<head>
	<meta name="_csrf" th:content="${_csrf.token}"/>
	<meta name="_csrf_header" th:content="${_csrf.headerName}"/>

	<link rel="stylesheet" href="/css/personnel/mypage.css">
	<script src="/js/personnel/mypage.js" defer></script>  
	<script src="//t1.daumcdn.net/mapjsapi/bundle/postcode/prod/postcode.v2.js"></script>


</head>
<body>
	<!--  -->
	<main class="personnel"><!--본인담당 기능대표명 클래스에 작성 -->
		
		<section class="mypage cmcontents">

			<div id="cmcreate" class="cmbox profile-edit">
				<h1>마이페이지</h1>
				<div>
					<button type="button" class="editbtn"><i class="fa-solid fa-plus"></i><span>프로필수정</span></button>
					<button type="button" class="createbtn"><i class="fa-solid fa-plus"></i><span>휴가 및 병가신청</span></button>
				
				</div>
				
			</div>
			
			
			<div class="wrap">
			
				<div class="Profile cmbox" >
				    <h1 class="subfont">프로필</h1>
					<img th:src="${mypagePhoto.profileImage != null ? 'data:image/jpeg;base64,' + mypagePhoto.profileImage : 'https://i.pinimg.com/564x/a5/e8/4d/a5e84dd8104ba6287b72e16401d173d7.jpg'}" alt="프로필 사진">
					<p th:text="${maypageList.name}"></p>
					<div>
						
						<p>
							이메일(아이디) <br><span th:text="${maypageList.email}"></span>
						</p>
						<p>
							비밀번호  <button class="cmbutton2 edit-pass-btn">새비밀번호</button> <br><span>******</span>
						</p>
						<p>
							연락처 <br><span th:text="${maypageList.phone !=null ? maypageList.phone : '등록되지않았습니다' }"></span>
						</p>
						<p>
							부서 <br> <span th:text="${maypageList.department.getKoName()}"></span>
						</p>
						<p>
							직급 <br> <span th:text="${maypageList.HighRole.roleName}"></span>
						</p>
						<p>
							주소 <br> <span th:text="${maypageList.address !=null ? maypageList.address : '등록되지않았습니다' }"></span>
						</p>
						<p>
							입사일 <br> <span th:text="${maypageList.hireDate}"></span>
						</p>
	
					</div>
				</div>  <!--프로필 끝-->


				<div>
					<div class="leave-request-status cmbox">
						<h1 class="subfont">휴가 및 병가 신청내역</h1>
						<div id="cmsearch-form">
							<form class="search-form " action="#" method="get">

							    <input type="date"id="hireDate" name="hireDate" class="cminput" required>
							     <span>~</span>
							     <input type="date"id="hireDate" name="hireDate" class="cminput" required>
								
								<select>
									<option>승인대기중</option>
									<option>승인완료</option>
								</select> 
								<button type="submit">검색</button>
							</form>
						</div>

						<div id="cmposting-format">
							<ul>
								<li>
									<!--목차입니다.--> 
									<span>신청일</span>
									<span>종류</span> 
									<span>신청자</span> 
									<span>시작일</span>
									<span>종료일</span> 
									<span>승인여부</span> 
									
								</li>

								<li>
									<!--타임리프 적용하려야하는 곳 입니다.-->
									<span>2024/7/14</span>
									<span>병가</span> 
									<span>김유진</span> 
									<span>2024/7/14</span>
									<span>2024/7/14</span> 
									<span>승인대기중</span> 

								</li>
								
									<li>
									<!--타임리프 적용하려야하는 곳 입니다.-->
									<span>2024/7/08</span>
									<span>휴가</span> 
									<span>김유진</span> 
									<span>2024/7/9</span>
									<span>2024/7/11</span> 
									<span>승인완료</span> 

								</li>
								
									<li>
									<!--타임리프 적용하려야하는 곳 입니다.-->
									<span>2024/6/25</span>
									<span>병가</span> 
									<span>김유진</span> 
									<span>2024/6/25</span>
									<span>2024/6/25</span> 
									<span>승인완료</span> 

								</li>
								
									<li>
									<!--타임리프 적용하려야하는 곳 입니다.-->
									<span>2024/6/05</span>
									<span>휴가</span> 
									<span>김유진</span> 
									<span>2024/7/1</span>
									<span>2024/7/5</span> 
									<span>승인완료</span> 

								</li>

							</ul>
						</div>

					</div>
					
					
					<div class="salary-status cmbox">
					<h1 class="subfont">급여 내역</h1>
					<div id="cmsearch-form">
							<form class="search-form " action="#" method="get">

							    <input type="date"id="hireDate" name="hireDate" class="cminput" required>
							    <span>~</span>
							    <input type="date"id="hireDate" name="hireDate" class="cminput" required>
								<button type="submit">검색</button>
							</form>
					</div>
					<div id="cmposting-format">
							<ul>
								<li>
									<!--목차입니다.--> 
									<span>지급날짜</span>
									<span>기본급</span> 
									<span>성과급</span> 
									<span>보너스</span>
									<span>총급여</span>  
									
								</li>

								<li>
									<!--타임리프 적용하려야하는 곳 입니다.-->
									<span>2024/7/14</span>
									<span>2,300,000</span> 
									<span>200,000</span> 
									<span>0</span>
									<span>2,500,000</span> 
								</li>
										<li>
									<!--타임리프 적용하려야하는 곳 입니다.-->
									<span>2024/6/14</span>
									<span>2,300,000</span> 
									<span>0</span> 
									<span>200,000</span>
									<span>2,500,000</span> 
								</li>
										<li>
									<!--타임리프 적용하려야하는 곳 입니다.-->
									<span>2024/5/14</span>
									<span>2,300,000</span> 
									<span>0</span> 
									<span>0</span>
									<span>2,300,000</span> 
								</li>
										<li>
									<!--타임리프 적용하려야하는 곳 입니다.-->
									<span>2024/4/14</span>
									<span>2,300,000</span> 
									<span>0</span> 
									<span>0</span>
									<span>2,300,000</span> 
								</li>
												<li>
									<!--타임리프 적용하려야하는 곳 입니다.-->
									<span>2024/3/14</span>
									<span>2,100,000</span> 
									<span>0</span> 
									<span>0</span>
									<span>2,100,000</span> 
								</li>
												<li>
									<!--타임리프 적용하려야하는 곳 입니다.-->
									<span>2024/3/14</span>
									<span>2,100,000</span> 
									<span>0</span> 
									<span>100,000</span>
									<span>2,200,000</span> 
								</li>
												<li>
									<!--타임리프 적용하려야하는 곳 입니다.-->
									<span>2024/2/14</span>
									<span>2,100,000</span> 
									<span>0</span> 
									<span>0</span>
									<span>2,100,000</span> 
								</li>

							</ul>
						</div>
					
					</div>
				</div>


			</div>






		</section>
		
			<!--새비밀번호 모달-->
		
		<div class="cmbox edit-pass-wrap hide">
			<div>
				<p class="subfont">비밀번호 변경</p>

				<button type="button" class="cmbutton pass-cancel-btn">
					<i class="fa-solid fa-xmark"></i>
				</button>
			</div>
		
			 <form action="/personnel/new-pass" method="post" id="edit-pass-form">
			 
			 <div class="edit-form-wrap">
				<label for="current-password" class="cmlabel">현재비밀번호</label> <br> 
				<input type="password" id="current-password" name="pass" class="cminput" required> <br>
				<div class="error current-pass-failure hide">현재 비밀번호가 일치하지 않습니다</div>
			 </div>
			 	
			 <div class="edit-form-wrap">
				<label for="new-password" class="cmlabel">새비밀번호</label> <br> 
				<input type="password" id="new-password" name="pass" class="cminput" required> <br>
				<div class="error new-pass-failure hide">6글자 이상(영문자,숫자,!@$%*)</div>
							
			 </div>
			 
			  <div class="edit-form-wrap">
				<label for="confirm-new-password" class="cmlabel">새비밀번호 확인</label> <br> 
				<input type="password" id="confirm-new-password" name="newpass" class="cminput" required> <br>
				<div class="error confirm-pass-failure hide">새비밀번호가 동일하지 않습니다</div>
							
			  </div>
				
				<div class="optionbtn-wrap">
					<input type="hidden" th:name="${_csrf.parameterName}"th:value="${_csrf.token}" />
					<input type="hidden" name="_method" value="put">
					<button type="submit" class="cmbutton">수정</button>
					<button type="reset" class="cmbutton2">초기화</button>
				</div>
			 
			 </form>
		
		</div>
		

		
		
		
	
		
		<div id="edit-profile">
				<button type="button" class="cmbutton cancelbtn">
					<i class="fa-solid fa-arrow-left"></i><span>취소하기</span>
				</button>

				<div>
				 	<p>프로필 수정</p>

					<form action="/mypage/profile-update" method="post" class="edit-profile-form" enctype="multipart/form-data">
					
					
						<div class="edit-form-wrap">
							<label for="profile-image" class="cmlabel">프로필이미지</label> <br> 
							<input type="file"id="profile-image" name="fileContent" class="cminput"><br>
						
						</div>
					
					
						
						<div class="edit-form-wrap">
							<label for="email" class="cmlabel">이메일</label> <br> 
							<input type="email"id="email" name="email" class="cminput"  th:value="${maypageList.email}" required  > <br>
							<div class="error email-failure hide">이메일 형식이 맞지 않습니다</div>
						
						</div>
					
						
						<div class="edit-form-wrap">
									
							<label for="phone" class="cmlabel">휴대폰</label> <br> 
							<input type="text" id="phone" name="phone" class="cminput" maxlength="13"  pattern="[0-9]{2,3}-[0-9]{3,4}-[0-9]{3,4}" th:value="${maypageList.phone !=null ? maypageList.phone : '' }" required/>
							<div class="error phone-failure hide">올바른 번호양식이 아닙니다</div>
							
						</div>
						
						<div class="edit-form-wrap">
								
							<label for="address" class="cmlabel">주소</label> 
							<button class="cmbutton2" id="search-btn">찾기</button><br> 
							<input type="text" class="cminput"  disabled id="roadAddress" th:value="${maypageList.roadAddress !=null ? maypageList.roadAddress : '' }" required />  <br>
							<input type="text" class="cminput" placeholder="상세주소를 입력해주세요." id="roadAddressDetail" th:value="${maypageList.detailAddress !=null ? maypageList.detailAddress : '' }"required />
						</div>
						
				
					
									
						<div class="optionbtn-wrap">
							<input type="hidden" th:name="${_csrf.parameterName}"th:value="${_csrf.token}" />
							<input type="hidden" name="_method" value="put">
							<button type="submit" class="cmbutton">수정</button>
							<button type="reset" class="cmbutton2">초기화</button>
						</div>
					



					</form>

				</div>
				
			</div>




	</main>

</body>
</html>